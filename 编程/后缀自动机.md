```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
const int N = 4000010;  // 至少 2*n 大小
int tot = 1, last = 1;
struct Node {
    int len, fa;
    unordered_map<int, int> ch;  // 动态转移
} node[N];
ll f[N], ans,distinct;
int head[N], ver[N], nxt[N], idx = 1;
void extend(int c) {
    int p = last, np = last = ++tot;
    f[tot] = 1;
    node[np].len = node[p].len + 1;
    for (; p && !node[p].ch.count(c); p = node[p].fa)
        node[p].ch[c] = np;
    if (!p) node[np].fa = 1;
    else {
        int q = node[p].ch[c];
        if (node[q].len == node[p].len + 1)
            node[np].fa = q;
        else {
            int nq = ++tot;
            node[nq] = node[q];
            node[nq].len = node[p].len + 1;
            node[q].fa = node[np].fa = nq;
            for (; p && node[p].ch[c] == q; p = node[p].fa)
                node[p].ch[c] = nq;
        }
    }
    distinct += node[np].len - node[node[np].fa].len;
}
void add(int a, int b) {
    ver[++idx] = b;
    nxt[idx] = head[a];
    head[a] = idx;
}
void dfs(int x) {
    for (int i = head[x]; i; i = nxt[i]) {
        dfs(ver[i]);
        f[x] += f[ver[i]];
    }
    if (f[x] > 1) ans = max(ans, f[x] * node[x].len);
}
int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    int n;
    cin >> n;
    vector<int> a(n);
    for (int i = 0; i < n; i++) cin >> a[i];
    // === 构建后缀自动机 ===
    for (int i = 0; i < n; i++) extend(a[i]);
    // === 统计不同子串数量和长度 ===
    ll totalLength = 0;
    for (int i = 2; i <= tot; i++) {
        int len_diff = node[i].len - node[node[i].fa].len;
        totalLength += (1LL * (node[i].len + node[node[i].fa].len + 1) * len_diff) / 2;
    }
    // === 建 parent 树 + DFS 统计出现次数 ===
    for (int i = 2; i <= tot; i++) add(node[i].fa, i);
    dfs(1);
    // === 统计出现次数 >= 2 的子串数量 ===
    ll repeatCount = 0;
    for (int i = 2; i <= tot; i++) {
        if (f[i] >= 2) repeatCount += node[i].len - node[node[i].fa].len;
    }
    cout  << ans << "\n";  //"最大 f[x]*len: "
    cout  << distinct << "\n";  //"不同子串数量: "
    cout << repeatCount << "\n";  // "出现次数>=2的不同子串数量: " 
    cout << totalLength << "\n";  //"所有不同子串的总长度: " 
    return 0;
}
```
