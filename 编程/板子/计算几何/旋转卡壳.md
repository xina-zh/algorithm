```c++
#include<iostream>
#include<cmath>
#include<vector>
#include<algorithm>
using namespace std;
typedef pair<int,int> pii;
#define x first 
#define y second
pii operator-(pii a, pii b){
    return {a.x-b.x,a.y-b.y};
}
int operator*(pii a,pii b){
    return (a.x*b.y-a.y*b.x);
}
int jl(pii a,pii b){
    return (a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y);
}
int cross(pii a,pii b,pii c){
    return (b-a)*(c-a);
}
int sta[100010];
int used[100010];
vector<pii> a;
int top;
int main(){
    ios::sync_with_stdio(false);
    cin.tie(0);cout.tie(0);
    int n;cin>>n;
    for(int i=1;i<=n;i++){
        int j,k;cin>>j>>k;
        a.push_back({j,k});
    }
    sort(a.begin(),a.end());
    a.erase(unique(a.begin(),a.end()),a.end());
    int len=a.size()-1;
    for(int i=0;i<=len;i++){
        while(top>=2&&cross(a[sta[top-1]],a[sta[top]],a[i])<0) {
            used[sta[top]]=0;
            top--;
        }
        sta[++top]=i;
        used[i]=1;
    }
    used[0]=0;
    for(int i=len-1;i>=0;i--){
        if(used[i]) continue;
        while(top>=2&&cross(a[sta[top-1]],a[sta[top]],a[i])<0) {
            used[sta[top]]=0;
            top--;
        }
        sta[++top]=i;
        used[i]=1;
    }
    bool temp=true;
    for(int i=3;i<=top;i++){
        if(cross(a[sta[1]],a[sta[i-1]],a[sta[i]])==0)
            continue;
        temp=false;
        break;
    }
    if(temp){
        cout<<jl(a[0],a[len]);
        return 0;
    }
    int d=3;
    int ans=0;
    for(int i=2;i<=top;i++){
        double dq=cross(a[sta[i-1]],a[sta[i]],a[sta[d]]);
        while(cross(a[sta[i-1]],a[sta[i]],a[sta[d+1]])>=dq){
            d++;
            dq=cross(a[sta[i-1]],a[sta[i]],a[sta[d]]);
            if(d==top) d=1;
        }
        ans=max(ans,max(jl(a[sta[i-1]],a[sta[d]]),jl(a[sta[i]],a[sta[d]])));
    }
    // for(int i=1;i<=top;i++){
    //     cout<<a[sta[i]].first<<' '<<a[sta[i]].second<<'\n';
    // }
    cout<<ans;
    return 0;
}
```#include<iostream>
#include<cmath>
#include<algorithm>
#include<vector>

using namespace std;
typedef pair<int,int> pii;
#define x first
#define y second
const int N=1e5+10;
int sta[N],top;
int used[N];
pii operator-(pii a,pii b){
    return {a.x-b.x,a.y-b.y};
}
int operator*(pii a,pii b){
    return a.x*b.y-a.y*b.x;
}
int cross(pii a,pii b,pii c){
    return (b-a)*(c-a);
}
vector<pii> a;
int jl(pii a,pii b){
    int dx=a.x-b.x;
    int dy=a.y-b.y;
    return dx*dx+dy*dy;
}

int main(){
    ios::sync_with_stdio(false);
    cin.tie(0);cout.tie(0);
    int n;cin>>n;
    for(int i=1;i<=n;i++){
        int j,k;cin>>j>>k;
        a.push_back({j,k});
    }
    sort(a.begin(),a.end());
    a.erase(unique(a.begin(),a.end()),a.end());
    int len=a.size();
    for(int i=0;i<len;i++){
        while(top>=2&&cross(a[sta[top-1]],a[sta[top]],a[i])<0){
            used[sta[top]]=0;
            top--;
        }
        sta[++top]=i;
        used[i]=1;
    }
    used[0]=0;
    for(int i=len-2;i>=0;i--){
        if(used[i]) continue;
        while(top>=2&&cross(a[sta[top-1]],a[sta[top]],a[i])<0){
            used[sta[top]]=0;
            top--;
        }
        sta[++top]=i;
        used[i]=1;
    }
    bool temp=true;
    for(int i=3;i<top;i++){
        if(cross(a[sta[1]],a[sta[i-1]],a[sta[i]])==0) continue;
        temp=false;
        break;//防止同一条直线
    }
    if(temp){
        cout<<jl(a[0],a[a.size()-1]);
        return 0;
    }
    int d=1;
    int ar=cross(a[sta[1]],a[sta[2]],a[sta[1]]);
    int ans=0;
    for(int i=2;i<top;i++){
        if(ar<=cross(a[sta[1]],a[sta[2]],a[sta[d]])){
            ar=cross(a[sta[1]],a[sta[2]],a[sta[d]]);
            d=i;
        }
    }
    ans=max(ans,max(jl(a[sta[1]],a[sta[d]]),jl(a[sta[2]],a[sta[d]])));
    for(int i=3;i<=top;i++){
        double dq=cross(a[sta[i-1]],a[sta[i]],a[sta[d]]);
        while(cross(a[sta[i-1]],a[sta[i]],a[sta[d+1]])>=dq){
            d++;
            dq=cross(a[sta[i-1]],a[sta[i]],a[sta[d]]);
            if(d==top) d=1;
        }
        ans=max(ans,max(jl(a[sta[i-1]],a[sta[d]]),jl(a[sta[i]],a[sta[d]])));
    }
    cout<<ans;
    return 0;
}

```